<!DOCTYPE html>
<html>
<head>
    <title>Animation Test</title>
    <script src="../../../p5js/libraries/p5.min.js"></script>
</head>
<body>
<script>
// SIMPLE TEST TO VERIFY ANIMATIONS WORK
let img;

function preload() {
    img = loadImage("/p5js/assets/dandy.jpg");
}

function setup() {
    img.resize(64, 0);
    createCanvas(windowWidth, windowHeight);
    textStyle(BOLD);
    textAlign(CENTER, CENTER);
}

function draw() {
    background(0);
    
    let size = width / img.width;
    let asciiChar = "█▓▒░@%#*+=:. ";
    
    img.loadPixels();
    
    for (let i = 0; i < img.width; i++) {
        for (let j = 0; j < img.height; j++) {
            let pixelVal = img.get(i, j);
            let bright = brightness(pixelVal);
            
            let tIndex = floor(map(bright, 0, 255, asciiChar.length - 1, 0));
            let t = asciiChar.charAt(tIndex);
            
            let x = i * size + size/2;
            let y = j * size + size/2;
            
            // FORCED ANIMATION (no audio needed)
            let wave = sin((i + j) * 0.1 + frameCount * 0.1);
            let pulse = sin(frameCount * 0.05) * 2 + 2; // 0 to 4x size
            let charSize = size * pulse * (1 + wave * 0.5);
            
            textSize(charSize);
            
            // Animated colors
            let r = red(pixelVal) * (sin(frameCount * 0.03) + 1);
            let g = green(pixelVal) * (cos(frameCount * 0.04) + 1);
            let b = blue(pixelVal) * (sin(frameCount * 0.05) + 1);
            
            fill(r, g, b);
            noStroke();
            text(t, x, y);
        }
    }
    
    // Show FPS and frame count
    fill(255);
    textSize(16);
    textAlign(LEFT, TOP);
    text(`FPS: ${Math.round(frameRate())}`, 20, 20);
    text(`Frame: ${frameCount}`, 20, 40);
    text('This should be CONSTANTLY animating!', 20, 60);
}
</script>
</body>
</html>

